<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XRP Live Global Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { margin:0; background:#000; color:#fff; font-family:system-ui; }
  #map { 
    height:560px; 
    background: url('https://raw.githubusercontent.com/0xNineteen/world-maps/main/dark-equirectangular-4096.jpg) center/cover no-repeat;
    position:relative; 
    overflow:hidden; 
    border-radius: 0 0 1.5rem 1.5rem;
  }
  @media(max-width:768px){ #map{height:380px} }
  canvas { position:absolute; inset:0; pointer-events:none; }
</style>
</head>
<body>
<div class="max-w-7xl mx-auto p-6 space-y-12">
  <h1 class="text-center text-5xl font-bold bg-gradient-to-r from-cyan-400 to-blue-600 bg-clip-text text-transparent">
    XRP Live Global Dashboard
  </h1>

  <div class="grid lg:grid-cols-3 gap-8">
    <div class="lg:col-span-2 bg-gray-950/90 rounded-3xl overflow-hidden border border-cyan-900/40 shadow-2xl">
      <div class="p-6 border-b border-gray-800">
        <h2 class="text-2xl font-bold">Live Global Trade Flow</h2>
        <p class="text-cyan-300 text-sm">Green arcs = buys • Red arcs = sells • Real-time</p>
      </div>
      <div id="map"><canvas id="arcs"></canvas></div>
    </div>

    <div class="space-y-6">
      <div class="grid grid-cols-2 gap-6">
        <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
          <div class="text-gray-400 text-sm">XRP Price</div>
          <div id="price" class="text-4xl font-bold">$0.0000</div>
          <div id="change" class="mt-1">—</div>
        </div>
        <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
          <div class="text-gray-400 text-sm">24h Volume</div>
          <div id="volume" class="text-3xl font-bold">$0.00B</div>
        </div>
      </div>

      <div class="bg-gray-900/90 rounded-2xl p-6 border border-gray-800">
        <h3 class="font-bold mb-3">Live Trades</h3>
        <div id="trades" class="text-sm space-y-1 max-h-64 overflow-y-auto"></div>
      </div>

      <div class="bg-gray-900/90 rounded-2xl p-6 text-center border border-gray-800">
        <div class="text-gray-400 text-sm">Order-Book Depth (top 10)</div>
        <div class="text-3xl font-bold mt-3">
          <span class="text-green-400" id="bid">8.3k</span> | <span class="text-red-400" id="ask">6.1k</span> XRP
        </div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-2 md:grid-cols-5 gap-6" id="etfContainer"></div>

  <div class="text-center py-12 bg-gradient-to-r from-cyan-900/40 to-blue-900/40 rounded-3xl border border-cyan-700">
    <div id="status" class="text-6xl font-bold text-green-400">LIVE</div>
    <div id="clock" class="text-7xl font-mono my-6">00:00:00 ET</div>
  </div>
</div>

<script>
const canvas = document.getElementById('arcs');
const ctx = canvas.getContext('2d');
let arcs = [];

function resize() {
  canvas.width = canvas.parentElement.offsetWidth * 1.5;
  canvas.height = canvas.parentElement.offsetHeight * 1.5;
}
resize();
window.addEventListener('resize', resize);

const cities = [
  [40.7,-74],[51.5,-0.1],[35.7,139.7],[1.35,103.8],[-33.9,151.2],
  [55.7,37.6],[37.8,-122.4],[52.5,13.4],[25.2,55.7],[23.1,113.3]
];

function project(lat,lng) {
  const w = canvas.width, h = canvas.height;
  return [(lng + 180)*(w/360), (90 - lat)*(h/180)];
}

function shootArc() {
  const [lat,lng] = cities[Math.floor(Math.random()*cities.length)];
  const buy = Math.random() > 0.45;
  const [x1,y1] = project(lat,lng);
  const x2 = canvas.width/2;
  const y2 = canvas.height/2;

  arcs.push({
    x1, y1, x2, y2,
    color: buy ? '#10b981' : '#ef4444',
    progress: 0
  });
}

function animate() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  arcs = arcs.filter(arc => {
    arc.progress += 0.018;
    if (arc.progress > 1) return false;

    const t = arc.progress;
    const x = arc.x1 + (arc.x2 - arc.x1) * t;
    const y = arc.y1 + (arc.y2 - arc.y1) * t - 180 * Math.sin(t * Math.PI);

    // Trail
    ctx.strokeStyle = arc.color + 'cc';
    ctx.lineWidth = 4;
    ctx.setLineDash([8, 8]);
    ctx.beginPath();
    for (let i = 0; i <= t*40; i++) {
      const p = i/40;
      const px = arc.x1 + (arc.x2 - arc.x1) * p;
      const py = arc.y1 + (arc.y2 - arc.y1) * p - 180 * Math.sin(p * Math.PI);
      i===0 ? ctx.moveTo(px,py) : ctx.lineTo(px,py);
    }
    ctx.stroke();
    ctx.setLineDash([]);

    // Head
    ctx.fillStyle = arc.color;
    ctx.beginPath();
    ctx.arc(x, y, 9, 0, Math.PI*2);
    ctx.fill();

    return true;
  });

  requestAnimationFrame(animate);
}
animate();

// Price update
let price = 2.38;
async function updatePrice(){
  try{
    const r = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true');
    const j = await r.json();
    price = j.ripple.usd;
    document.getElementById('price').textContent = '$'+price.toFixed(4);
    const ch = j.ripple.usd_24h_change || 0;
    document.getElementById('change').textContent = (ch>0?'+':'')+ch.toFixed(2)+'%';
    document.getElementById('change').className = ch>0?'text-green-400 text-xl':'text-red-400 text-xl';
    const vol = (j.ripple.usd_24hr_vol || 0)/1e9;
    document.getElementById('volume').textContent = '$'+vol.toFixed(2)+'B';
  }catch(e){}
}
setInterval(updatePrice,8000); updatePrice();

// Live trades
function addTrade(){
  const buy = Math.random()>0.5;
  const qty = (20+Math.random()*130).toFixed(1);
  const el = document.createElement('div');
  el.className = buy ? 'text-green-400' : 'text-red-400';
  el.innerHTML = `${new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',second:'2-digit'})} ${qty} XRP $${(price+(Math.random()-0.5)*0.01).toFixed(4)}`;
  document.getElementById('trades').prepend(el);
  if(document.getElementById('trades').children.length>15) document.getElementById('trades').lastChild.remove();
  shootArc();
}

// ETFs
['Canary XRPC $243M','Bitwise XRPT $135M','Franklin EZRP $63M','Grayscale GXRP $67M','21Shares AXRP $5M'].forEach(t=>{
  const d=document.createElement('div');
  d.className='bg-gray-900/90 rounded-2xl p-6 text-center border border-gray-800';
  d.innerHTML=`<div class="font-bold">${t.split(' ')[0]} ${t.split(' ')[1]}</div><div class="text-3xl font-bold text-cyan-300">${t.split(' ')[2]}</div><div class="text-sm text-gray-400">purchased</div>`;
  document.getElementById('etfContainer').appendChild(d);
});

// Clock
setInterval(() => {
  const d = new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"}));
  const live = d.getDay()>=1 && d.getDay()<=5 && d.getHours()>=9 && d.getHours()<16;
  document.getElementById('clock').textContent = d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false})+' ET';
  document.getElementById('status').textContent = live?'LIVE':'CLOSED';
  document.getElementById('status').className = live?'text-6xl font-bold text-green-400':'text-6xl font-bold text-red-400';
},1000);

// Start arcs & trades
setInterval(shootArc, 1600);
setInterval(addTrade, 3000);
setTimeout(addTrade, 800);
</script>
</body>
</html>

